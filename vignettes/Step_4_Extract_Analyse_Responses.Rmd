---
title: "Step 4: Extract and analyse BIO-WELL scores"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Step 4: Extract and analyse BIO-WELL scores}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

After your BIO-WELL survey URL has been shared to participants and their
responses have been saved to your Dropbox, it is time to download the data,
evaluate your survey and explore patterns in BIO-WELL scores.

# Step 1: Download survey response data

Participant responses have been saved as individual `csv` files within your designated Dropbox folder. 

`BIOWELL` package function `download_data()` collates survey responses and returns a single data frame for analysis. 

```{r, eval = FALSE}
survey_data <- download_data(drop_box_folder = "survey_responses",
                             BW_app_path = "C:/Users/eerdo/Desktop/my_app_name_1")

head(survey_data)
```

# Step 2: Evaluate survey 

When analysing survey response data, it is important to evaluate the reliability of questions asked and the use of the BIO-WELL scale.  

The function `evaluate_survey()` offers multiple methods to evaluate the reliability of surveys. 

1) Cronbach's alpha 

Cronbach's alpha is a way of assessing reliability by comparing the amount of shared variance, or covariance, among the items making up an instrument to the amount of overall variance (Cronbach, 1951). The idea is that if the instrument is reliable, there should be a great deal of covariance among the items relative to the variance.

This function calculates Cronbach's alpha to test the internal consistency of BIO-WELL scores for each question by each participant. A threshold of >0.7 typically indicates acceptable reliability; Nunnally, 1978.

2) Item-total correlation (corrected) (threshold >0.3, Boateng et al., 2018) 

The item total correlation is a correlation between the question score (e.g., 0 or 1 for multiple choice) and the overall assessment score (e.g., 67%). It is expected that if a participant gets a question correct they should, in general, have higher overall assessment scores than participants who get a question wrong.

First, look at the Corrected Item-Total Correlation. This is the correlation between each item and a scale score that excludes that item (uses all the other items, but not that one). Items with negative item-total correlations probably aren’t good items. But don’t discard more than 1-2 at a time.

https://www.frontiersin.org/articles/10.3389/fpsyg.2018.02298/full

```{r}
library(BIOWELL)
data("example_survey_data")
survey_data <- example_survey_data

results<-evaluate_survey(survey_data, type = "situation_question")
results[[2]]
results[[3]]

results<-evaluate_survey(survey_data, type = "question")
results[[2]]
results[[3]]
```


# Step 3: Explore survey responses

To facilitate preliminary analyses of survey response data, the `BIOWELL` package includes the function `explore_data`.

The function returns a plot comparing BIO-WELL scores across various categories, including:

1) Column

The survey response data frame contains multiple columns including for each start and end question. 

Using argument `type = "column"` and `column_name = "what is your age?"`, you can specify the comparison to make. 

For example, this would input would generate a boxplot comparing BIO-WELL scores
between each age category of participants.

```{r fig.width=7}
results <- explore_data(data = example_survey_data,
                        type = "column",
                        column_name = "Age",
                        var_name = "Participants age range",
                        plot = TRUE)


results <- explore_data(data = example_survey_data,
                        type = "column",
                        column_name = "Visit.moorlands",
                        var_name = "Whether participants had recently visited moorlands",
                        plot = TRUE)
```

2) Situation 

For situations, analysis can be trickier as more than one column contains relevant data. 

By using `explore_data()` with argument `type = "situation"`, this function collates the average BIO-WELL score for each participant for each BIO-WELL situation included within the survey (e.g. "Woodland" and "Urban"). The function returns a processed data frame and generates a boxplot to compare BIO-WELL scores between situations. 

```{r, fig.width=7}
results <- explore_data(data = example_survey_data, 
                        type = "situation",
                        plot = TRUE)
```


3) Question 

For BIO-WELL questions, analysis can also be tricky as more than one column may contain relevant data. 

By using `explore_data()` with argument `type = "question"`, this function collates the average BIO-WELL score for each participant for each BIO-WELL question included within the survey (e.g. "Biodiversity Abundance" and "Distnctiveness of sounds"). 

The function returns a processed data frame and generates a boxplot to compare BIO-WELL scores between questions.  

```{r fig.width=7, fig.height=10}
results <- explore_data(data = example_survey_data,
                        type = "question",
                        plot = TRUE)
```

3) Situation-question 

If questions are repeated across situations, but you want to compare these separately then input `type = "situation-question"`. This treats each questions within each situation as a unique category. 

The function then collates the BIO-WELL score for each participant for each question in each situation, generates a boxplot of BIO-WELL scores for comparison, and returns a processed data frame. 

```{r fig.width=7, fig.height=10}
results <- explore_data(data = example_survey_data,
                        type = "situation_question",
                        plot = FALSE)

results[[1]][1]
results[[1]][2]
```



# Further analyses

We hope the functions covered in this vignette facilitate preliminary analysis
of BIO-WELL scores from your surveys.This concludes our vignettes for the
`BIOWELL` package.

Please visit the package's GitHub page to report any bugs or to ask questions on
how to use the package.








